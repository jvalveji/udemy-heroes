<!-- *************************************************************
[HTML /admin/catalogos/distritos/distritos-editar.component.html]

Proyecto:	arca Core
Version:	1.1
Fecha de creación:	09/2017
Asignado a:	Joseph Arias (jariass@ccss.sa.cr)(diseño)
Desarrollo: Dagoberto Gómez, Centro de Gestión Informática
Centro: Hospital San Vicente de Paúl
Cliente: Caja Costarricense de Seguro Social

Rediseño: 10/2018 Joseph Arias (jariass@ccss.sa.cr)(diseño)
Modificado: 10/2019 Adrián Fallas (afallasp@ccss.sa.cr)(diseño)
************************************************************* -->

<div class="ar-page" fullscreen fxLayout="column">
	<div fxFlex fxLayout="column" layout>
		<!-- Toolbar principal de la vista -->
		<mat-toolbar class="ar-toolbar mat-elevation-z0">
			<button mat-icon-button (click)="IrPaginaAnterior()">
				<mat-icon>arrow_back</mat-icon>
			</button>
			<span class="ar-margin-left-xs">Distritos</span>
		</mat-toolbar>
		<!-- Barra de progreso -->
		<div class="ar-progressbar">
			<mat-progress-bar *ngIf="esCargando" mode="indeterminate"></mat-progress-bar>
		</div>
		<!-- Select filtro provincia y cantón -->
		<div fxLayout="column">
			<div fxLayout="row" fxLayoutAlign="center center">
				<div fxFlex="40" fxFlex.sm="80" fxFlex.md="65" fxFlex.xs="95">
					<div fxLayout="row" fxLayoutAlign="center center"> 
						<mat-form-field fxFlex appearance="outline" class="ar-margin-right-xs">
							<mat-label>Provincias</mat-label>
							<mat-select fxFlex placeholder="Provincias" [(ngModel)]="provinciaSeleccionada"
								name="provinciaSeleccionada"
								(ngModelChange)="ObtenerCantonByProvincia(provinciaSeleccionada)">
								<mat-option *ngFor="let provincia of provincias" [value]="provincia">
									{{provincia.descripcion}}
								</mat-option>
							</mat-select>
						</mat-form-field>
						<mat-form-field fxFlex appearance="outline">
							<mat-label>Cantones</mat-label>
							<mat-select fxFlex placeholder="Cantones" [(ngModel)]="cantonSeleccionado"
								name="cantonSeleccionado" (ngModelChange)="ObtenerDistritoByCanton(cantonSeleccionado)">
								<mat-option *ngFor="let canton of cantones" [value]="canton">
									{{canton.descripcion}}
								</mat-option>
							</mat-select>
						</mat-form-field>
					</div>
				</div>
			</div>
		</div>
		<div class="ar-border-05"></div>
		<!-- Toolbar de búsqueda -->
		<div class="ar-searchbar-toolbar ar-margin-top-sm" fxLayoutAlign="center center">
			<div class="ar-searchbar" fxFlex="45" fxFlex.sm="75" fxFlex.md="65" fxFlex.xs="80"
				fxLayoutAlign="center center">
				<!-- Input de búsqueda  -->
				<input class="ar-searchbar-input ar-margin-left-sm ar-color-54" placeholder="Buscar"
					[disabled]="catalogo.length === 0" [(ngModel)]="txtFiltro">
				<span fxFlex></span>
				<button mat-icon-button matTooltip="Limpiar" (click)="txtFiltro=null;">
					<i class="mdi mdi-close-circle ar-icons-sm ar-color-54"></i>
				</button>
			</div>
		</div>
		<!--Mensaje vacío-->
		<div fxLayout="row" fxLayoutAlign="center center" class="ar-margin-percentage-xs"
			*ngIf="catalogo.length === 0 && !esEdicion && !esCargando">
			<div fxLayout="column" fxLayoutAlign="center center">
				<i class="material-icons ar-icons-xmd ar-color-54">place</i>
				<span class="mat-body-1 ar-color-54 ar-margin-top-xs">Seleccione una provincia y un cantón</span>
			</div>
		</div>
		<!-- Inicio listado de ítems -->
		<perfect-scrollbar fxFlex class="ar-content" fxLayout="row" fxLayoutAlign="center start">
			<div fxLayout="column" fxFlex="60" fxFlex.xs="95" fxFlex.sm="95" fxFlex.md="80">
				<div fxLayout="column" class="ar-padding-bottom-lg ar-margin-top-xs">
					<!-- Ítem expandible tipo acordeón -->
					<mat-accordion>
						<mat-expansion-panel class="ar-background mat-elevation-z0"
							*ngFor="let item of catalogo | filtrarIdDescripcion: txtFiltro">
							<mat-expansion-panel-header fxLayout="row" fxLayoutAlign="center center"
								(click)="CapturarItem(item)">
								<mat-panel-title class="ar-text-dark">
									<div fxFlex fxLayout="row" fxLayoutAlign="start center">
										<div class="ar-avatar" *ngIf="item.estado" matTooltip="Código del cantón">
											<p class="ar-avatar-xs ar-avatar-green"> {{item.codigo}}</p>
										</div>
										<div class="ar-avatar" *ngIf="!item.estado" matTooltip="Código del cantón">
											<p class="ar-avatar-xs ar-avatar-red"> {{item.codigo}}</p>
										</div>
										<div fxLayout="column" class="ar-margin-left-sm">
											<span class="ar-h4 ar-color-87"> {{item.descripcion}} </span>
										</div>
										<span fxFlex></span>
										<mat-chip-list class="ar-margin-right-xs" *ngIf="!item.estado">
											<ng-container>
												<mat-chip class="ar-chips-xs ar-chips-red">
													<span>DESHABILITADO</span>
												</mat-chip>
											</ng-container>
										</mat-chip-list>
									</div>
								</mat-panel-title>
							</mat-expansion-panel-header>
							<!-- Input editar ítem -->
							<div fxFlex="100">
								<mat-form-field fxFlex appearance="outline">
									<mat-label>Descripción</mat-label>
									<input matInput placeholder="Descripción del ítem" [value]="item.descripcion">
								</mat-form-field>
							</div>
							<!-- Menú de aciones -->
							<mat-action-row>
								<button mat-button color="warn" *ngIf="item.estado"
									(click)="item.estado=false;ActualizarCatalogo();">Deshabilitar</button>
								<button mat-button class="ar-text-green" *ngIf="!item.estado"
									(click)="item.estado=true;ActualizarCatalogo();">Habilitar</button>
							</mat-action-row>
						</mat-expansion-panel>
					</mat-accordion>
				</div>
			</div>
		</perfect-scrollbar>
	</div>
</div>